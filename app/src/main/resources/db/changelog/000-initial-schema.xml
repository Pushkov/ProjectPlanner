<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.10.xsd">
    <changeSet id="20211030-create-address-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ADDRESS"/>
            </not>
        </preConditions>
        <createTable tableName="ADDRESS">
            <column name="ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_ADDRESS"/>
            </column>
            <column name="PHONE" type="VARCHAR(255)"/>
            <column name="MOBILE" type="VARCHAR(255)"/>
            <column name="EMAIL" type="VARCHAR(255)"/>
            <column name="OFFICE" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-department-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="DEPARTMENT"/>
            </not>
        </preConditions>
        <createTable tableName="DEPARTMENT">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_DEPARTMENT"/>
                <!--                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_4"/>-->
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_BY" type="VARCHAR(255)"/>
            <column name="LAST_MODIFIED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_MODIFIED_BY" type="VARCHAR(255)"/>
            <column name="FULL_NAME" type="VARCHAR(255)"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="BASIC_DEPARTMENT_ID" type="BIGINT"/>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-document-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="DOCUMENT"/>
            </not>
        </preConditions>
        <createTable tableName="DOCUMENT">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <!--                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_6"/>-->
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_DOCUMENT"/>
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_BY" type="VARCHAR(255)"/>
            <column name="LAST_MODIFIED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_MODIFIED_BY" type="VARCHAR(255)"/>
            <column name="DESIGNATION" type="VARCHAR(255)"/>
            <column name="DESIGNER" type="VARCHAR(255)"/>
            <column name="DESIGNER_SIGN" type="TIMESTAMP"/>
            <column name="NORM_CONTROL" type="VARCHAR(255)"/>
            <column name="NORM_CONTROL_SIGN" type="TIMESTAMP"/>
            <column name="VERIFIER" type="VARCHAR(255)"/>
            <column name="VERIFIER_SIGN" type="TIMESTAMP"/>
            <column name="NAME" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-format-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="FORMAT"/>
            </not>
        </preConditions>
        <createTable tableName="FORMAT">
            <column name="FORMAT" type="VARCHAR(100)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_FORMAT"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="SIZE" type="FLOAT"/>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-document-format-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="DOCUMENT_FORMAT"/>
            </not>
        </preConditions>
        <createTable tableName="DOCUMENT_FORMAT">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <!--                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_8"/>-->
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_DOCUMENT_FORMAT"/>
            </column>
            <column name="FORMAT" type="VARCHAR(255)"/>
            <column name="QTY" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="DOCUMENT_ID" type="BIGINT"/>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-status-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="STATUS"/>
            </not>
        </preConditions>
        <createTable tableName="STATUS">
            <column name="STATUS" type="VARCHAR(100)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_STATUS"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-engineer-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ENGINEER"/>
            </not>
        </preConditions>
        <createTable tableName="ENGINEER">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <!--                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_9"/>-->
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_ENGINEER"/>
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_BY" type="VARCHAR(255)"/>
            <column name="LAST_MODIFIED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_MODIFIED_BY" type="VARCHAR(255)"/>
            <column name="FIRST_NAME" type="VARCHAR(255)"/>
            <column name="LAST_NAME" type="VARCHAR(255)"/>
            <column name="PATRONYMIC_NAME" type="VARCHAR(255)"/>
            <column name="STATUS" type="VARCHAR(255)"/>
            <column name="ADDRESS_ID" type="BIGINT"/>
            <column name="DEPARTMENT_ID" type="BIGINT"/>
            <column name="ROLE_ID" type="BIGINT"/>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-memo-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="MEMO"/>
            </not>
        </preConditions>
        <createTable tableName="MEMO">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <!--                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_2"/>-->
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_MEMO"/>
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_BY" type="VARCHAR(255)"/>
            <column name="LAST_MODIFIED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_MODIFIED_BY" type="VARCHAR(255)"/>
            <column name="DATE_TIME" type="TIMESTAMP"/>
            <column name="NUMBER" type="VARCHAR(255)"/>
            <column name="TITLE_LIST_ID" type="VARBINARY(255)"/>
            <column name="WORKSHOP_ID" type="BIGINT"/>
        </createTable>
    </changeSet>


    <changeSet id="20211102-create-permission-v4" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="PERMISSION"/>
            </not>
        </preConditions>
        <createTable tableName="PERMISSION">
            <column name="ID" type="BIGINT">
                <!--                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_F"/>-->
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_PERMISSION"/>
            </column>
            <!--            <column name="CREATED_AT" type="TIMESTAMP">-->
            <!--                <constraints nullable="false"/>-->
            <!--            </column>-->
            <!--            <column name="CREATED_BY" type="VARCHAR(255)"/>-->
            <!--            <column name="LAST_MODIFIED_AT" type="TIMESTAMP">-->
            <!--                <constraints nullable="false"/>-->
            <!--            </column>-->
            <!--            <column name="LAST_MODIFIED_BY" type="VARCHAR(255)"/>-->
            <column name="NAME" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>


    <changeSet id="20211031-create-plan-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="PLAN"/>
            </not>
        </preConditions>
        <createTable tableName="PLAN">
            <column name="MONTH" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="YEAR" type="VARBINARY(255)">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_BY" type="VARCHAR(255)"/>
            <column name="LAST_MODIFIED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_MODIFIED_BY" type="VARCHAR(255)"/>
            <column name="DEPARTMENT_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="PLAN" columnNames="DEPARTMENT_ID, MONTH, YEAR" constraintName="PK_PLAN"/>
    </changeSet>

    <changeSet id="20211031-create-plan_point-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="PLAN_POINT"/>
            </not>
        </preConditions>
        <createTable tableName="PLAN_POINT">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <!--                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_80"/>-->
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_PLAN_POINT"/>
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_BY" type="VARCHAR(255)"/>
            <column name="LAST_MODIFIED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_MODIFIED_BY" type="VARCHAR(255)"/>
            <column name="PLAN_DEPARTMENT_ID" type="BIGINT"/>
            <column name="PLAN_MONTH" type="INT"/>
            <column name="PLAN_YEAR" type="VARBINARY(255)"/>
            <column name="PROJECT_ID" type="BIGINT"/>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-project-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="PROJECT"/>
            </not>
        </preConditions>
        <createTable tableName="PROJECT">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <!--                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_1"/>-->
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_PROJECT"/>
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_BY" type="VARCHAR(255)"/>
            <column name="LAST_MODIFIED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_MODIFIED_BY" type="VARCHAR(255)"/>
            <column name="DESIGNATION" type="VARCHAR(255)"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="AGREE" type="VARCHAR(255)"/>
            <column name="AGREE_SIGN" type="TIMESTAMP"/>
            <column name="APPROVE" type="VARCHAR(255)"/>
            <column name="APPROVE_SIGN" type="TIMESTAMP"/>
            <column name="DESIGNER" type="VARCHAR(255)"/>
            <column name="DESIGNER_SIGN" type="TIMESTAMP"/>
            <column name="NORM_CONTROL" type="VARCHAR(255)"/>
            <column name="NORM_CONTROL_SIGN" type="TIMESTAMP"/>
            <column name="VERIFIER" type="VARCHAR(255)"/>
            <column name="VERIFIER_SIGN" type="TIMESTAMP"/>
            <column name="DEPARTMENT_ID" type="BIGINT"/>
            <column name="MEMO_ID" type="BIGINT"/>
            <column name="TASK_ID" type="BIGINT"/>
            <column name="WORKSHOP_ID" type="BIGINT"/>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-project-basic_project-v1" author="Pushkov">
        <createTable tableName="PROJECT_BASIC_PROJECT">
            <column name="PROJECTS_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="BASIC_PROJECT_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-document-project-v1" author="Pushkov">
        <createTable tableName="DOCUMENT_PROJECTS">
            <column name="DOCUMENTS_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="PROJECTS_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-role-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ROLE"/>
            </not>
        </preConditions>
        <createTable tableName="ROLE">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <!--                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_26"/>-->
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_ROLE"/>
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_BY" type="VARCHAR(255)"/>
            <column name="LAST_MODIFIED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_MODIFIED_BY" type="VARCHAR(255)"/>
            <column name="NAME" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-role-permission-v1" author="Pushkov">
        <createTable tableName="ROLE_PERMISSIONS">
            <column name="ROLES_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="PERMISSIONS_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-tech_task-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="TECHNICAL_TASK"/>
            </not>
        </preConditions>
        <createTable tableName="TECHNICAL_TASK">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <!--                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_254"/>-->
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_TECHNICAL_TASK"/>
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_BY" type="VARCHAR(255)"/>
            <column name="LAST_MODIFIED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_MODIFIED_BY" type="VARCHAR(255)"/>
            <column name="DATE_TIME" type="TIMESTAMP"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="NUMBER" type="VARCHAR(255)"/>
            <column name="BASE_TASK_ID" type="BIGINT"/>
            <column name="TITLE_LIST_ID" type="VARBINARY(255)"/>
            <column name="WORKSHOP_ID" type="BIGINT"/>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-title_list-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="TITLE_LIST"/>
            </not>
        </preConditions>
        <createTable tableName="TITLE_LIST">
            <column name="ID" type="VARBINARY(255)">
                <!--                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_B"/>-->
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_TITLE_LIST"/>
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_BY" type="VARCHAR(255)"/>
            <column name="LAST_MODIFIED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_MODIFIED_BY" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>

    <changeSet id="20211031-create-workshop-v1" author="Pushkov">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="WORKSHOP"/>
            </not>
        </preConditions>
        <createTable tableName="WORKSHOP">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <!--                <constraints nullable="false" primaryKey="true" primaryKeyName="CONSTRAINT_3"/>-->
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_WORKSHOP"/>
            </column>
            <column name="CREATED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="CREATED_BY" type="VARCHAR(255)"/>
            <column name="LAST_MODIFIED_AT" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="LAST_MODIFIED_BY" type="VARCHAR(255)"/>
            <column name="FULL_NAME" type="VARCHAR(255)"/>
            <column name="INDEX" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="DEPARTMENT_ID" type="BIGINT"/>
        </createTable>
    </changeSet>
</databaseChangeLog>
